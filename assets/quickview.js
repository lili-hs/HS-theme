window.theme=window.theme||{},window.theme=window.theme||{},theme.Sections=function(){this.constructors={},this.instances=[],$(document).on("shopify:section:load",this._onSectionLoad.bind(this)).on("shopify:section:unload",this._onSectionUnload.bind(this)).on("shopify:section:select",this._onSelect.bind(this)).on("shopify:section:deselect",this._onDeselect.bind(this)).on("shopify:block:select",this._onBlockSelect.bind(this)).on("shopify:block:deselect",this._onBlockDeselect.bind(this))},theme.Sections.prototype=_.assignIn({},theme.Sections.prototype,{_createInstance:function(e,t){var i=$(e),n=i.attr("data-section-id"),a=i.attr("data-section-type");if(t=t||this.constructors[a],!_.isUndefined(t)){var s=_.assignIn(new t(e),{id:n,type:a,container:e});this.instances.push(s)}},_onSectionLoad:function(e){var t=$("[data-section-id]",e.target)[0];t&&this._createInstance(t)},_onSectionUnload:function(e){this.instances=_.filter(this.instances,function(t){var i=t.id===e.detail.sectionId;return i&&_.isFunction(t.onUnload)&&t.onUnload(e),!i})},_onSelect:function(e){var t=_.find(this.instances,function(t){return t.id===e.detail.sectionId});!_.isUndefined(t)&&_.isFunction(t.onSelect)&&t.onSelect(e)},_onDeselect:function(e){var t=_.find(this.instances,function(t){return t.id===e.detail.sectionId});!_.isUndefined(t)&&_.isFunction(t.onDeselect)&&t.onDeselect(e)},_onBlockSelect:function(e){var t=_.find(this.instances,function(t){return t.id===e.detail.sectionId});!_.isUndefined(t)&&_.isFunction(t.onBlockSelect)&&t.onBlockSelect(e)},_onBlockDeselect:function(e){var t=_.find(this.instances,function(t){return t.id===e.detail.sectionId});!_.isUndefined(t)&&_.isFunction(t.onBlockDeselect)&&t.onBlockDeselect(e)},register:function(e,t){this.constructors[e]=t,$("[data-section-type="+e+"]").each(function(e,i){this._createInstance(i,t)}.bind(this))}}),window.slate=window.slate||{},slate.a11y={pageLinkFocus:function(e){var t="js-focus-hidden";e.first().attr("tabIndex","-1").focus().addClass(t).one("blur",function(){e.first().removeClass(t).removeAttr("tabindex")})},focusHash:function(){var e=window.location.hash;e&&document.getElementById(e.slice(1))&&this.pageLinkFocus($(e))},bindInPageLinks:function(){$("a[href*=#]").on("click",function(e){this.pageLinkFocus($(e.currentTarget.hash))}.bind(this))},trapFocus:function(e){var t=e.namespace?"focusin."+e.namespace:"focusin";e.$elementToFocus||(e.$elementToFocus=e.$container),e.$container.attr("tabindex","-1"),e.$elementToFocus.focus(),$(document).off("focusin"),$(document).on(t,function(t){e.$container[0]===t.target||e.$container.has(t.target).length||e.$container.focus()})},removeTrapFocus:function(e){var t=e.namespace?"focusin."+e.namespace:"focusin";e.$container&&e.$container.length&&e.$container.removeAttr("tabindex"),$(document).off(t)}},theme.Images=function(){return{preload:function(e,t){"string"==typeof e&&(e=[e]);for(var i=0;i<e.length;i++){var n=e[i];this.loadImage(this.getSizedImageUrl(n,t))}},loadImage:function(e){(new Image).src=e},switchImage:function(e,t,i){var n=this.imageSize(t.src),a=this.getSizedImageUrl(e.src,n);i?i(a,e,t):t.src=a},imageSize:function(e){var t=e.match(/.+_((?:pico|icon|thumb|small|compact|medium|large|grande)|\d{1,4}x\d{0,4}|x\d{1,4})[_\.@]/);return null!==t?t[1]:null},getSizedImageUrl:function(e,t){if(null==t)return e;if("master"===t)return this.removeProtocol(e);var i=e.match(/\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\?v=\d+)?$/i);if(null!=i){var n=e.split(i[0]),a=i[0];return this.removeProtocol(n[0]+"_"+t+a)}return null},removeProtocol:function(e){return e.replace(/http(s)?:/,"")}}}(),theme.Currency=function(){var e="${{amount}}";return{formatMoney:function(t,i){"string"==typeof t&&(t=t.replace(".",""));var n="",a=/\{\{\s*(\w+)\s*\}\}/,s=i||e;function o(e,t,i,n){if(t=t||2,i=i||",",n=n||".",isNaN(e)||null==e)return 0;var a=(e=(e/100).toFixed(t)).split(".");return a[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+i)+(a[1]?n+a[1]:"")}switch(s.match(a)[1]){case"amount":n=o(t,2);break;case"amount_no_decimals":n=o(t,0);break;case"amount_with_comma_separator":n=o(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":n=o(t,0,".",",");break;case"amount_no_decimals_with_space_separator":n=o(t,0," ")}return s.replace(a,n)}}}(),slate.Variants=function(){function e(e){this.$container=e.$container,this.product=e.product,this.singleOptionSelector=e.singleOptionSelector,this.originalSelectorId=e.originalSelectorId,this.enableHistoryState=e.enableHistoryState,this.currentVariant=this._getVariantFromOptions(),$(this.singleOptionSelector,this.$container).on("change",this._onSelectChange.bind(this))}return e.prototype=_.assignIn({},e.prototype,{_getCurrentOptions:function(){var e=_.map($(this.singleOptionSelector,this.$container),function(e){var t=$(e),i=t.attr("type"),n={};if("radio"===i||"checkbox"===i)return!!t[0].checked&&(n.value=t.val(),n.index=t.data("index"),n);n.value=t.val(),n.index=t.data("index");var a=n.value.replace(/'/g,"\\'");return $("."+n.index).find(".swatchInput[value='"+a+"']").prop("checked",!0),$("."+n.index).find(".slVariant").text(n.value),n});return e=_.compact(e)},_getVariantFromOptions:function(){var e=this._getCurrentOptions(),t=this.product.variants;return _.find(t,function(t){return e.every(function(e){return _.isEqual(t[e.index],e.value)})})},_onSelectChange:function(){var e=this._getVariantFromOptions();this.$container.trigger({type:"variantChange",variant:e}),e&&(this._updateMasterSelect(e),this._updateImages(e),this._updatePrice(e),this._updateSKU(e),this.currentVariant=e,this.enableHistoryState&&this._updateHistoryState(e))},_updateImages:function(e){var t=e.featured_image||{},i=this.currentVariant.featured_image||{};e.featured_image&&t.src!==i.src&&this.$container.trigger({type:"variantImageChange",variant:e})},_updatePrice:function(e){e.price===this.currentVariant.price&&e.compare_at_price===this.currentVariant.compare_at_price||this.$container.trigger({type:"variantPriceChange",variant:e})},_updateSKU:function(e){e.sku!==this.currentVariant.sku&&this.$container.trigger({type:"variantSKUChange",variant:e})},_updateHistoryState:function(e){if(history.replaceState&&e){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?variant="+e.id;window.history.replaceState({path:t},"",t)}},_updateMasterSelect:function(e){$(this.originalSelectorId,this.$container).val(e.id)}}),e}(),theme.Product=function(){function e(e){var t=this.$container=$(e),i=t.attr("data-section-id");this.settings={mediaQueryMediumUp:"screen and (min-width: 750px)",mediaQuerySmall:"screen and (max-width: 749px)",bpSmall:!1,enableHistoryState:t.data("enable-history-state")||!1,imageSize:null,imageZoomSize:null,namespace:".slideshow-"+i,sectionId:i,sliderActive:!1,zoomEnabled:!1},this.selectors={addToCart:"#AddToCart-"+i,addToCartText:"#AddToCartText-"+i,comparePrice:"#ComparePrice-"+i,originalPrice:"#ProductPrice-"+i,SKU:".variant-sku",originalPriceWrapper:".product-price__price-"+i,originalSelectorId:"#ProductSelect-"+i,productFeaturedImage:"#FeaturedImage-"+i,productImageWrap:"#FeaturedImageZoom-"+i,productPrices:".product-single__price-"+i,productThumbImages:".product-single__thumbnail--"+i,productThumbs:".product-single__thumbnails-"+i,saleClasses:"product-price__sale product-price__sale--single",saleLabel:".product-price__sale-label-"+i,singleOptionSelector:".single-option-selector-"+i},$(".product-photoslider").not(".slick-initialized").slick({dots:!1,infinite:!0,speed:300,rtl:theme.rtl,fade:!0,slidesToShow:1,slidesToScroll:1,asNavFor:".product-photoslider-thumb"}),$(".product-photoslider-thumb").not(".slick-initialized").slick({asNavFor:".product-photoslider",dots:!1,infinite:!0,speed:300,vertical:!0,verticalSwiping:!0,slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:851,settings:{vertical:!1,slidesToShow:4,slidesToScroll:1}}]}),$("#ProductJson-"+i).html()&&(this.productSingleObject=JSON.parse(document.getElementById("ProductJson-"+i).innerHTML),this.settings.zoomEnabled&&(this.settings.imageZoomSize=theme.Images.imageSize($(this.selectors.productImageWrap).data("zoom"))),this._stringOverrides(),this._initVariants(),theme.Images.preload(this.productSingleObject.images,this.settings.imageSize))}return e.prototype=_.assignIn({},e.prototype,{_stringOverrides:function(){theme.productStrings=theme.productStrings||{},$.extend(theme.strings,theme.productStrings)},_initVariants:function(){var e={$container:this.$container,enableHistoryState:this.$container.data("enable-history-state")||!1,singleOptionSelector:this.selectors.singleOptionSelector,originalSelectorId:this.selectors.originalSelectorId,product:this.productSingleObject};this.variants=new slate.Variants(e),this.$container.on("variantChange"+this.settings.namespace,this._updateAddToCart.bind(this)),this.$container.on("variantImageChange"+this.settings.namespace,this._updateImages.bind(this)),this.$container.on("variantPriceChange"+this.settings.namespace,this._updatePrice.bind(this)),this.$container.on("variantSKUChange"+this.settings.namespace,this._updateSKU.bind(this))},_updateImages:function(e){var t=e.variant,i=theme.Images.getSizedImageUrl(t.featured_image.src,this.settings.imageSize);this._setActiveThumbnail(i)},_setActiveThumbnail:function(e){var t=$('.product-photoslider .item[data-src="'+e+'"]').attr("data-slick-index");$(".product-photoslider").slick("slickGoTo",t)},_updateAddToCart:function(e){var t=e.variant;t?($(this.selectors.productPrices).removeClass("visibility-hidden").attr("aria-hidden","true"),t.available?($(this.selectors.addToCart).prop("disabled",!1),$(this.selectors.addToCartText).text(theme.strings.addToCart),$(".instock").removeClass("hide"),$(".outstock").addClass("hide")):($(this.selectors.addToCart).prop("disabled",!0),$(this.selectors.addToCartText).text(theme.strings.soldOut),$(".instock").addClass("hide"),$(".outstock").removeClass("hide"))):($(this.selectors.addToCart).prop("disabled",!0),$(this.selectors.addToCartText).text(theme.strings.unavailable),$(this.selectors.productPrices).addClass("visibility-hidden").attr("aria-hidden","false"),$(".instock").addClass("hide"),$(".outstock").removeClass("hide"))},_updatePrice:function(e){var t=e.variant;$(this.selectors.originalPrice).html(theme.Currency.formatMoney(t.price,theme.moneyFormat)),t.compare_at_price>t.price?($(this.selectors.comparePrice).html(theme.Currency.formatMoney(t.compare_at_price,theme.moneyFormat)).removeClass("hide"),$(this.selectors.originalPriceWrapper).addClass(this.selectors.saleClasses),$(this.selectors.saleLabel).removeClass("hide")):($(this.selectors.comparePrice).addClass("hide"),$(this.selectors.saleLabel).addClass("hide"),$(this.selectors.originalPriceWrapper).removeClass(this.selectors.saleClasses))},_updateSKU:function(e){var t=e.variant;$(this.selectors.SKU).html(t.sku)},onUnload:function(){this.$container.off(this.settings.namespace)}}),e}(),theme.ajaxCart=function(){$(".product-quickview-submit").click(function(e){if(e.preventDefault(),"disabled"!=$(this).attr("disabled"))if(theme.ajax_cart){var t=$(this).closest("form").find("select[name=id]").val();t||(t=$(this).closest("form").find("input[name=id]").val());var i=$(this).closest("form").find("input[name=quantity]").val();i||(i=1),function(e,t){$("body").addClass("loading"),CartJS.addItem(e,t,{},{success:function(e,t,i){setTimeout(function(){$.magnificPopup.close(),$("body").removeClass("loading showOverly"),$(".block-cart").addClass("active")},1e3),drawerTimeout=setTimeout(function(){$(".block-cart").removeClass("active")},7e3)},error:function(e,t,i){var n=JSON.parse(e.responseText).description;$("body").removeClass("loading"),$(".error-message").text(n),$("body").addClass("showOverly"),$("#errorDrawer").fadeIn(500),drawerTimeout=setTimeout(function(){$("body").removeClass("loading showOverly"),$("#errorDrawer").fadeOut(200)},6e3)}})}(t,i)}else $(".productForm").submit()})},$(theme.ajaxCart),$(document).ready(function(){(new theme.Sections).register("product",theme.Product),$(".qtyBtn").on("click",function(){var e=$(this).parent(".qtyField"),t=$(e).find(".qty").val(),i=1;$(this).is(".plus")?i=parseInt(t)+1:t>1&&(i=parseInt(t)-1),$(e).find(".qty").val(i)})});
